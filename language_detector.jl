include("../hyperdim_encode.jl")


# encode the alphabet
alphabet_hv = alphabet_encoding(string.(vcat('a':'z', ' ')))


# references
function language_preprocessing(text::String, alphabet::Vector{String})
    #make text lowercase
    text = lowercase(text)

    #remove odd accents and peculiarities
    text = replace(text, "é"=>"e")
    text = replace(text, "ê"=>"e")
    text = replace(text, "è"=>"e")
    text = replace(text, "ë"=>"e")
    text = replace(text, "ę"=>"e")
    text = replace(text, "á"=>"a")
    text = replace(text, "à"=>"a")
    text = replace(text, "â"=>"a")
    text = replace(text, "ä"=>"a")
    text = replace(text, "ą"=>"a")
    text = replace(text, "ç"=>"c")
    text = replace(text, "ć"=>"c")
    text = replace(text, "î"=>"i")
    text = replace(text, "ï"=>"i")
    text = replace(text, "í"=>"i")
    text = replace(text, "ł"=>"l")
    text = replace(text, "ñ"=>"n")
    text = replace(text, "ń"=>"n")
    text = replace(text, "ô"=>"o")
    text = replace(text, "ö"=>"o")
    text = replace(text, "ó"=>"o")
    text = replace(text, "ś"=>"s")
    text = replace(text, "û"=>"u")
    text = replace(text, "ü"=>"u")
    text = replace(text, "ź"=>"z")
    text = replace(text, "ż"=>"z")

    #remove punctuation
    text = string([t for t in text if string(t) ∈ alphabet]...)
    return text
end

english_text = "The American Revolution was an ideological and political revolution that occurred in colonial North America between 1765 and 1791. The Americans in the Thirteen Colonies formed independent states that defeated the British in the American Revolutionary War (1775–1783), gaining independence from the British Crown and establishing the United States of America, the first modern constitutional liberal democracy. American colonists objected to being taxed by the British Parliament, a body in which they had no direct representation. Before the 1760s, Britain's American colonies had enjoyed a high level of autonomy in their internal affairs, which were locally governed by colonial legislatures. The passage of the Stamp Act of 1765 imposed internal taxes on the colonies, which led to colonial protest, and the meeting of representatives of several colonies in the Stamp Act Congress. Tensions relaxed with the British repeal of the Stamp Act, but flared again with the passage of the Townshend Acts in 1767. The British government deployed troops to Boston in 1768 to quell unrest, leading to the Boston Massacre in 1770. The British government repealed most of the Townshend duties in 1770, but retained the tax on tea in order to symbolically assert Parliament's right to tax the colonies. The burning of the Gaspee in Rhode Island in 1772, the passage of the Tea Act of 1773 and the Boston Tea Party in December 1773 led to a new escalation in tensions. The British responded by closing Boston Harbor and enacting a series of punitive laws which effectively rescinded Massachusetts Bay Colony's privileges of self-government. The other colonies rallied behind Massachusetts, and twelve of the thirteen colonies sent delegates in late 1774 to form a Continental Congress for the coordination of their resistance to Britain. Opponents of Britain were known as Patriots or Whigs, while colonists who retained their allegiance to the Crown were known as Loyalists or Tories. Open warfare erupted when British regulars sent to capture a cache of military supplies were confronted by local Patriot militia at Lexington and Concord on April 19, 1775. Patriot militia, joined by the newly formed Continental Army, then put British forces in Boston under siege by land and their forces withdrew by sea. Each colony formed a Provincial Congress, which assumed power from the former colonial governments, suppressed Loyalism, and contributed to the Continental Army led by Commander in Chief General George Washington. The Patriots unsuccessfully attempted to invade Quebec and rally sympathetic colonists there during the winter of 1775–76. The Continental Congress declared British King George III a tyrant who trampled the colonists' rights as Englishmen, and they pronounced the colonies free and independent states on July 4, 1776. The Patriot leadership professed the political philosophies of liberalism and republicanism to reject rule by monarchy and aristocracy. The Declaration of Independence proclaimed that all men are created equal, though it was not until later centuries that constitutional amendments and federal laws would increasingly grant equal rights to African Americans, Native Americans, poor white men, and women. The British captured New York City and its strategic harbor in the summer of 1776, which they held for the duration of the war. The Continental Army captured a British army at the Battle of Saratoga in October 1777, and France then entered the war as an ally of the United States, transforming the war into a global conflict. The Royal Navy blockaded ports and captured other cities for brief periods, but they failed to destroy Washington's forces. Britain also attempted to hold the Southern states with the anticipated aid of Loyalists, and the war moved south. British general Charles Cornwallis captured an American army at Charleston, South Carolina in early 1780, but he failed to enlist enough volunteers from Loyalist civilians to take effective control of the territory. Finally, a combined American and French force captured Cornwallis' army at Yorktown in the fall of 1781, effectively ending the war. The Treaty of Paris was signed on September 3, 1783, formally ending the conflict and confirming the new nation's complete separation from the British Empire. The United States took possession of nearly all the territory east of the Mississippi River and south of the Great Lakes, with the British retaining control of northern Canada, and Spain taking Florida. Among the significant results of the war were American independence and the end of British merchantilism in America, opening up worldwide trade for the United States - including with Britain. The Americans soon adopted the United States Constitution, replacing the weak Confederation by establishing a comparatively strong national government structured as a federal republic, which included an elected executive, a national judiciary, and an elected bicameral Congress representing states in the Senate and the population in the House of Representatives. It is the world’s first federal democratic republic founded on the consent of the governed. Shortly after a Bill of Rights was ratified as the first ten amendments, guaranteeing fundamental rights used as justification for the revolution. Around 60,000 Loyalists migrated to other British territories, particularly to (Canada), but the great majority remained in the United States."
english_preproc = language_preprocessing(english_text, string.(vcat('a':'z', ' ')))
english_enc = text_encoding(english_preproc, alphabet_hv)
french_text = "La Révolution française est une période de bouleversements sociaux et politiques de grande envergure en France, dans ses colonies et en Europe à la fin du xviiie siècle. La période habituellement comprise s'étend entre l'ouverture des États généraux, le 5 mai 1789, et au plus tard le coup d'État de Napoléon Bonaparte le 9 novembre 1799 (18 brumaire de l'an VIII). Cette période de l'histoire de France a mis fin à l'Ancien Régime en remplaçant la monarchie absolue par une suite de régimes plus ou moins définis, dont la Première République un peu plus de trois ans après la prise de la Bastille. La Révolution française a légué de toutes nouvelles formes politiques, notamment au travers de la Déclaration des droits de l'homme et du citoyen de 1789 qui proclame l'égalité des citoyens devant la loi, les libertés fondamentales, et la souveraineté de la Nation, et se constituant autour d'un État. « Mythe national », ses valeurs et les institutions de la Révolution dominent encore aujourd'hui la vie politique française. La Révolution a entraîné la suppression de la société d'ordres (féodalité, privilèges…), une plus grande division de la propriété foncière, la limitation de l'exercice du pouvoir politique, le rééquilibrage des relations entre l'Église et l'État et la redéfinition des structures familiales. Elle fut marquée par des périodes de grande violence, notamment pendant la Terreur, dans le cadre de la tentative de contre-révolution de la guerre de Vendée, au cours de laquelle plusieurs centaines de milliers de personnes trouvèrent la mort, lors des insurrections fédéralistes ou dans le cadre de luttes entre factions révolutionnaires rivales, qui ont abouti à la mort successive des principales figures révolutionnaires. Les guerres de la Révolution française, qui ont touché une large partie de l’Europe continentale, ont propagé les idées révolutionnaires et contribué à l'abolition de la société d'ordres en Europe occidentale, dans les « républiques sœurs » puis dans toute l'Europe. La Révolution française « diffère des autres révolutions par ses exigences universalistes en ce qu'elle est destinée à bénéficier à toute l'humanité ». Dès son commencement, la portée universelle des idées de la Révolution française a été proclamée par ses partisans et l'ampleur de ses conséquences soulignée par ses détracteurs. La Révolution est restée un objet de débats ainsi qu'une référence controversée tout au long des deux siècles qui l'ont suivie, en France et dans le monde. Elle a créé des divisions immédiates et durables entre les partisans des idées révolutionnaires et les défenseurs de l'ordre ancien, ainsi qu’entre les anticléricaux et l'Église catholique. Elle est considérée par la majorité des historiens comme l'un des événements majeurs de l'histoire mondiale. Elle marque le début d’une période de grande instabilité institutionnelle en France et en Europe au cours de laquelle se succèdent trois monarchies constitutionnelles, deux éphémères républiques et deux empires, jusqu’à l’avènement définitif de la République au cours des années 1870. L'histoire contemporaine est marquée par les héritages de la Révolution française quand la plupart des mouvements révolutionnaires l'ont perçue comme un événement précurseur1. Ses grandes phrases et ses symboles culturels sont devenus les étendards d'autres bouleversements majeurs de l'histoire moderne, y compris lors de la révolution russe plus d'un siècle plus tard."
french_preproc = language_preprocessing(french_text, string.(vcat('a':'z', ' ')))
french_enc = text_encoding(french_preproc, alphabet_hv)
dutch_text = "De Belgische Revolutie, Belgische Omwenteling of Belgische Opstand is de gewapende opstand in 1830 tegen koning Willem I der Nederlanden die tot afscheiding van de zuidelijke provincies leidde en tot de onafhankelijkheid van België. Na de Franse Revolutie en de val van Napoleon hadden toenmalige grootmachten zoals de Duitse staten en het Verenigd Koninkrijk een bufferzone gecreëerd door de Belgische gebieden toe te wijzen aan het nieuwe Nederlandse koninkrijk. Dit was gebeurd zonder binnenlandse inspraak. Het weifelende en onhandige optreden van Willem I en zijn zonen leidde in september 1830 tot een definitieve breuk. Enerzijds had Willem I wel al in juni 1830 de onbeperkte taalvrijheid weer ingevoerd en het Filosofische College voor priesters afgeschaft. Anderzijds liet hij noch persvrijheid, noch een staatshervorming toe. Hij stuurde zijn zoon, kroonprins Willem, naar Brussel, terwijl zijn andere zoon, prins Frederik, die opperbevelhebber was van het koninklijke leger, in en rond Vilvoorde klaarstond met een leger van 6000 man. Dit optreden werd vergeleken met dat van een bezetter. De troepen bleven vooralsnog in Vilvoorde en prins Willem ging onder bescherming van de Brusselse burgerwacht de stad binnen. Deze laatste stelde op 3 september voor dat de prins bij zijn vader voor een bestuurlijke scheiding van België en Nederland onder de Oranjedynastie zou pleiten. Willem I weifelde echter en liet enkele weken verlopen. Pas op 29 september besloten de Staten-Generaal tot scheiding, maar toen hadden de opstandelingen deze eis al laten vallen. In Holland zorgden de onlusten in het Zuiden voor een nieuwe sympathie voor de koning en was er grote aanhang voor een stevig optreden tegen het 'muitzieke Belgenrot'. Dit accentueerde de tegenstelling tussen noord en zuid waardoor de opstand een nationalistisch karakter kreeg. De opstootjes in Brussel werden gewelddadiger, vooral nadat er begin september gewapende versterking uit Luik gekomen was. Spontaan werden vrijkorpsen opgericht, die geleid werden door verkozen of door zichzelf benoemde leiders. Op 23 september trok het regeringsleger, onder aanvoering van prins Frederik met een leger van 12.000 man Brussel binnen. De burgerwacht kon de volkswoede op dit leger afwentelen en doen omslaan in een nationale opstand. Het leger, dat zich in het Warandepark had opgesteld, werd het doelwit van de Brusselse opstandelingen en van overal toegesnelde idealisten. Ook vanuit het buitenland stroomden vrijwilligers toe: zo werd in Frankrijk het Légion belge parisienne opgericht, dat met privésteun gefinancierd werd door onder meer graaf de Merode en twee bataljons van telkens 400 vrijwilligers leverde. Dit gebeurde met instemming van de Franse regering, die zo een eventuele aanhechting van België bij Frankrijk in de hand wou werken. Toen het regeringsleger (waarvan 2/3 Zuid-Nederlanders) na vier dagen strijd, met honderden doden en gewonden aan beide zijden, in de nacht van 26 op 27 september opbrak, begon de scheiding pas goed. Tijdens deze gevechten in het park van Brussel kwam een revolutionaire regering tot stand: het Voorlopig Bewind. Op 4 oktober riep deze de onafhankelijkheid van België uit."
dutch_preproc = language_preprocessing(dutch_text, string.(vcat('a':'z', ' ')))
dutch_enc = text_encoding(dutch_preproc, alphabet_hv)
spanish_text = "El 16 de marzo de 2001, el fundador de Wikipedia, Jimmy Wales anunció, a través de un mensaje de correo, su intención de internacionalizar el proyecto mediante la creación de ediciones en francés, alemán, español y posiblemente, japonés. En el mismo mensaje comenta, bromeando, que también ha recibido una petición para crear una wiki en catalán. Casi dos meses después, el 11 de mayo, los programadores Jason Richey y Toan Vo abrieron once wikis para iniciar las diferentes ediciones de wikipedias en varios idiomas, entre ellos el español. La Wikipedia en esta lengua comenzó a funcionar el 20 de mayo de 2001. Entre sus primeros artículos aparecen «Países del mundo», creado el 21 de mayo de 2001, a las 00:19 UTC, «Ayuda:Cómo empezar una página», creado un día más tarde, e «Informática», el 25 de mayo.A finales de ese año, el número de artículos ascendía a la cifra de 220, pudiéndose leer entre ellos «Física de partículas», «Don Quijote de la Mancha», «Materia» y «Wiki». Meses después, en febrero de 2002, la mayoría de los participantes de esta edición mostraron su desacuerdo con la propuesta, rechazada más tarde, de financiar Wikipedia mediante publicidad. En un principio, los dos fundadores Jimmy Wales y Larry Sanger, se mostraron a favor de incluir publicidad.Sanger estaba totalmente convencido de incluir anuncios y Wales rechazó las críticas de la comunidad hispanohablante sobre la inclusión de publicidad al escribir que «quiero hacer constar que pienso que dicha gente está seriamente equivocada en muchos aspectos de su visión del mundo. La inclusión de publicidad debería hacerse con buen gusto». Muchos de los editores españoles se separaron del proyecto para crear una bifurcación del proyecto, bautizada como Enciclopedia Libre Universal en Español, la cual, desde su implantación en febrero de 2002 y hasta mediados de 2004, llegó a tener una mayor cantidad de artículos que Wikipedia en español. Las razones esgrimidas para ello fueron «su rechazo a la censura, a la existencia de una línea editorial y a la inclusión de publicidad» y al hecho de que por entonces la inclusión de publicidad dependía de la empresa propietaria, Bomis Inc, una sociedad mercantil propiedad de Wales. Esta protesta de los wikipedistas españoles e hispanohablantes jugó un papel relevante para que la controversia se zanjara a favor de la exclusión definitiva de la publicidad como forma de financiar el proyecto, ya fuera por el temor de Wales al efecto contagio en otros idiomas o por razones éticas. Para alguno de los editores implicados en la bifurcación, esta podría haber sido «la gota que colmó la balanza a favor de una Wikipedia 100% libre de publicidad», mientras que Wales declararía posteriormente que «la bifurcación española fue un evento importante en la historia de Wikipedia, pero no provocó un cambio». Todas las subsiguientes propuestas sobre la financiación de Wikipedia por medio de publicidad han sido rápida y firmemente rechazadas, también por el propio fundador Jimmy Wales. Este último, sin embargo, en ocasiones ha declarado a la prensa que no descarta por completo la idea. Durante un tiempo tras su escisión, Wikipedia en español tuvo una actividad muy escasa. En octubre de 2002 y tras producirse la actualización a la Fase III del software, que pasaría a llamarse MediaWiki, el número de usuarios comenzó de nuevo a incrementarse. En marzo de 2006, Wikipedia en español era ya el más activo de los dos proyectos. Desde entonces, muchos usuarios colaboran en ambos y buena parte de los artículos se traducen entre versiones de Wikipedia, dada la compatibilidad de las licencias."
spanish_preproc = language_preprocessing(spanish_text, string.(vcat('a':'z', ' ')))
spanish_enc = text_encoding(spanish_preproc, alphabet_hv)
hungarian_text = "Egy apát, nagyapát, egy volt országgyűlési képviselőt, közgyűlési tagot, egy több száz cikkel, könyvvel, TV-műsorral bíró sikeres publicistát és rendező-operatőr-szerkesztőt, legalább tucat jelentős érdemrend és kitüntetés hordozóját, Budapest Főváros Kossuth-díjas díszpolgárát kísérjük most utolsó földi útjára. Temetjük a kérlelhetetlen Városvédőt és nem utolsó sorban a Budapesti Városvédő Egyesület alapítójának és örökös tiszteletbeli elnökének porait. Nem temetjük viszont az intézménnyé vált közembert, a nem mai értelemben vett médiasztár népnevelőt és tudatformálót és velünk maradt szellemét, mely minket is átjárt. Szövetséget kötöttünk! Bennünk is felsejlett az addig felfedezetlenül lappangó nagy lehetőség, a közvélemény meghatározó ereje, mely, a sokszor irracionális politikai akarattal kész szembeszállni, de egy jó ügy érdekében ugyanazzal képes akár értelmes kompromisszumokat is kötni. Nem kis felfedezése és saját innovációja volt ez Mihálynak. Mint egy szeizmográf érzett rá Ő e kicsit céltalanná vált, az örökséget lassan és teljesen amortizáló korszak, titkos, belső igényére. Egy visszafordíthatatlan folyamatot indított el, ami előtte nem volt elképzelhető. Unalmas, szürke és pangó kor szférájába hozott friss és fényes szeleket, felvetítve és lemodellezve egy eljövendő részvételi demokrácia valós lehetőségét. Akkor és tíz évvel ezelőttig Mihály “csúcsnézettségű” „Unokáink sem fogják látni” tv-műsora élesztett egy újtípusú polgári igényt és magatartást, mely felébredt a képrombolás képtelenségéből és saját, majdnem elfelejtett értékei felé nyúlt. Mihály képes volt ízléssel szelektálni, ízlésesen tette nevetségessé a mű-múltat, ösztönszerű biztonsággal tudta az értékeket elválasztani a silány utánzatoktól, giccstől, a valós és eredeti épített örökséget a hatalomigényű történelmi reprodukcióktól. Nem véletlen tehát, hogy a közbeszédet meghatározó tematizáló tv-műsorát, azon nyomban, amint erre – nyugdíjazására hivatkozva – lehetőség nyílt, levették a képernyőről. 17,000 aláírást gyűjtöttünk akkor össze  határon innen és túlról a műsor fennmaradásáért, az ismert zéró sikerrel. Én egyébként azóta nem nézek semmilyen tv-t. Mihály kicsit Podmaniczky Frigyes reinkarnációjának tekintette magát… És valóban, Mihály nélkül fele annyit sem tudnánk sem Podmaniczky Frigyesről, sem a Fővárosi Közmunkák Tanácsa tevékenységéröl, munkásságáról, de az egyesített főváros történetéről, értékes épületeiről és kultikus helyeiről sem. Temetni jöttem és Ráday Mihályt dicsérni! A népnevelőt, a tudatformálót búcsúztatjuk, aki a hivatást az elhivatottsággal képes volt összekötni, képes volt a korok ízlésvilágát érthetően értelmezni, magyarázni és a mába helyezni. Véleménye mindig megfontolandó volt, mindig súlya volt. Pallasz Athénét és Podmaniczkyt Mihály integrálta a BVE hagyományaiba, mi most Ráday Mihályt emeljük e panteonba! Béke poraidra Mihály, nyugodj békében, emléked legyen áldott! Köztünk maradsz, velünk maradsz!"
hungarian_preproc = language_preprocessing(hungarian_text, string.(vcat('a':'z', ' ')))
hungarian_enc = text_encoding(hungarian_preproc, alphabet_hv)
german_text = "Die Novemberrevolution von 1918/19 führte in der Endphase des Ersten Weltkrieges zum Sturz der Monarchie im Deutschen Reich und zu dessen Umwandlung in eine parlamentarische Demokratie, die Weimarer Republik. Die tieferen Ursachen der Revolution lagen in den extremen Belastungen durch den mehr als vier Jahre währenden Krieg, im allgemeinen Schock über die Niederlage des deutschen Kaiserreichs, in dessen vordemokratischen Strukturen und sozialen Spannungen sowie in der Politik seiner reformunwilligen Eliten. Ihr unmittelbarer Auslöser aber war der Flottenbefehl der Seekriegsleitung vom 24. Oktober 1918. Er sah vor, die deutsche Hochseeflotte trotz der bereits feststehenden Kriegsniederlage Deutschlands in eine letzte Schlacht gegen die britische Royal Navy zu entsenden. Gegen diesen militärisch sinnlosen und den Friedensbemühungen der Reichsregierung zuwiderlaufenden Plan richtete sich die Meuterei einiger Schiffsbesatzungen, die in den Kieler Matrosenaufstand mündete. Dieser wiederum entwickelte sich innerhalb weniger Tage zur Revolution, die das ganze Reich erfasste. Sie führte am 9. November 1918 in Berlin zur Ausrufung der Republik und zur Machtübernahme der Mehrheitssozialisten unter Friedrich Ebert. Wenig später folgten die Abdankungen Kaiser Wilhelms II. und aller anderen Bundesfürsten. Der Rat der Volksbeauftragten, die provisorische Revolutionsregierung, schrieb Wahlen zu einer verfassunggebenden Nationalversammlung aus, die am 19. Januar 1919 stattfanden und für die erstmals auch das Frauenwahlrecht galt. Die in Weimar tagende Nationalversammlung verabschiedete am 11. August 1919 die neue, demokratische Reichsverfassung, mit der die Revolution formell ihren Abschluss fand. Über die Parlamentarisierung hinausgehende, von rätedemokratischen Vorstellungen geleitete Ziele des linken Flügels der Revolutionäre scheiterten unter anderem am Widerstand der SPD-Führung. Aus Furcht vor einem Bürgerkrieg wollte sie in Zusammenarbeit mit den bürgerlichen Parteien die alten kaiserlichen Eliten nicht vollständig entmachten, sondern sie mit den neuen demokratischen Verhältnissen versöhnen. Dazu ging sie ein Bündnis mit der Obersten Heeresleitung (OHL) ein und ließ im Januar 1919 den sogenannten Spartakusaufstand gewaltsam niederschlagen, unter anderem mit Hilfe irregulärer, rechtsgerichteter Freikorpstruppen. In gleicher Weise ging die provisorische Regierung gegen weitere rätedemokratische Versuche vor, etwa gegen die Münchner Räterepublik. Bei den Kämpfen in Berlin und München kamen zwischen November 1918 und Mai 1919 mindestens 2400 Menschen ums Leben."
german_preproc = language_preprocessing(german_text, string.(vcat('a':'z', ' ')))
german_enc = text_encoding(german_preproc, alphabet_hv)
polish_text = "W lipcu 1784 pożegnawszy się z przyjaciółmi, wrócił do Polski (12 sierpnia 1784). Sytuacja w kraju była zła. Po raz kolejny powrócił więc Kościuszko do rodzinnych Siechanowicz, gdzie spędzić miał teraz bez mała pięć lat. Na szczęście jego część majątku, administrowana przez ten czas przez szwagra Estko, nie była zadłużona, a nawet przynosiła dochód. Mimo skromnych dochodów, z trudem wystarczających na niezbędne wydatki, Kościuszko ograniczył pańszczyznę chłopom siechnowickim. Odtąd mieli odpracowywać tylko dwa dni w tygodniu (dotychczas cztery). Kobiety zwolnione zostały od pracy zupełnie. Taka decyzja, zgodna z poglądami generała, nie znalazła uznania u okolicznej szlachty. Kościuszko interesował się wydarzeniami w kraju. Coraz większą rolę w życiu politycznym Polski odgrywała grupa działaczy, widzących konieczność przeprowadzenia reform. Radykalna stała się też postawa części nastrojonej patriotycznie szlachty. Pisarze polityczni, tacy jak Stanisław Staszic i Hugo Kołłątaj, występowali za wzmocnieniem władzy centralnej, za przyznaniem większych praw mieszczaństwu i chłopom. Obradujący w latach 1788–1792 Sejm, zwany Wielkim lub Czteroletnim, podjął dzieło naprawy Rzeczypospolitej. Jedną z pierwszych swoich uchwał podniósł liczbę wojska do 100 tysięcy. Powstała dla Kościuszki szansa kariery wojskowej w armii Rzeczypospolitej. 12 października 1789 otrzymał podpisaną przez króla nominację na generała majora wojsk koronnych. Uzyskanie upragnionego patentu miało też przynieść kres trapiącym go od kilku lat kłopotom finansowym, otrzymywał teraz wysoką pensję dwunastu tysięcy złotych rocznie. Dążenia Polaków do wzmocnienia ojczyzny wywołały niepokój Rosji oraz Prus, a także części rodzimej magnaterii, związanej z obcymi mocarstwami. W kwietniu 1792 spiskowcy magnaccy, Szczęsny Potocki, Seweryn Rzewuski i Franciszek Ksawery Branicki przygotowali akt konfederacji, znoszącej postanowienia Konstytucji 3 maja. Gwarantem przywrócenia dawnych praw miała być caryca Katarzyna II. Akt konfederacji ogłoszony został 14 maja, w pogranicznej miejscowości Targowica, a w kilka dni później armia rosyjska, na prośbę targowiczan, przekroczyła granice Rzeczypospolitej. Od kilku już miesięcy trwały w Polsce przygotowania do spodziewanej interwencji. Kościuszko brał w nich udział, dokonując inspekcji i manewrów podległych sobie wojsk, obejmując przy tym dowództwo dywizji pod nieobecność księcia Józefa Poniatowskiego. Na początku maja 1792 dokonana została reorganizacja wojsk polskich. Wodzem armii koronnej, liczącej około 17 tys. żołnierzy, król mianował księcia Józefa Poniatowskiego. Dowódcą jednej z trzech dywizji, tworzących armię koronną, został Tadeusz Kościuszko. 18 maja wojska rosyjskie (w sile około 100 tysięcy żołnierzy) wkroczyły na terytorium Rzeczypospolitej. Rozpoczęła się wojna polsko-rosyjska 1792. Armia litewska, wskutek zdrady dowódcy ks. Ludwika Wirtemberskiego, nie stawiła najeźdźcom prawie żadnego oporu. Również armia koronna nie dysponowała wystarczającymi siłami dla powstrzymania korpusu wkraczającego na Ukrainę. Udało się jej tylko wycofać bez większych strat na linię Bugu. W trakcie odwrotu doszło 18 czerwca do zwycięskiej bitwy pod Zieleńcami. Wprawdzie nie miała ona większego znaczenia dla przebiegu dalszych działań, wykazała jednak możliwość skutecznej walki z wrogiem. Dla uczczenia tego zwycięstwa ustanowiony został przez króla Order Virtuti Militari. Na pierwszej liście odznaczonych widnieje, między innymi, nazwisko generała majora Tadeusza Kościuszki. Kościuszko odznaczył się w bitwach pod Zieleńcami (18 czerwca), Włodzimierzem (7 lipca) i pod Dubienką (18 lipca 1792). Po walkach na linii Bugu, w których odparto około trzykrotnie silniejsze wojska rosyjskie, ukształtowała się opinia o wysokich umiejętnościach dowódczych Kościuszki, czego wyrazem była nominacja na generała lejtnanta, podpisana 1 sierpnia 1792. Zanim nominacja ta dotarła do obozu pod Sieciechowem, gdzie rozlokowała się armia koronna, doszłą wiadomość o przystąpieniu króla do konfederacji targowickiej i polecenie wstrzymania wszelkich działań przeciwko wojskom rosyjskim. Kościuszko w odpowiedzi na nią dnia 30 lipca podał się do dymisji. Uzasadnił to tym, że „zmiana okoliczności krajowych byłaby przeciwną pierwiastkowej mojej przysiędze i wewnętrznemu przekonaniu”"
polish_preproc = language_preprocessing(polish_text, string.(vcat('a':'z', ' ')))
polish_enc = text_encoding(polish_preproc, alphabet_hv)

reference_languages = Dict("english"=>english_enc, "french"=>french_enc, "dutch"=>dutch_enc, "spanish"=>spanish_enc, "hungarian"=>hungarian_enc, "german"=>german_enc, "polish"=>polish_enc)

# some examples to classify
example1 = "Nieuwe dada van mij: hyperdimensionaal rekenen. Volgens enkele papers zou dit representaties kunnen genereren die even krachtig zijn als word2vec etc. Neem eens allemaal die posts door."
ex1_preproc = language_preprocessing(example1, string.(vcat('a':'z', ' ')))
example2 = "Ceci n'est pas une pipe. Liberté, égalité, fraternité"
ex2_preproc = language_preprocessing(example2, string.(vcat('a':'z', ' ')))
example3 = "Para bailar la bamba, para bailar la bamba se necesita una poca de gracia. Una poca de gracia pa' mi pa' ti y arriba y arriba. Ah y arriba y arriba por ti seré, por ti seré, por ti seré. Yo no soy marinero. Yo no soy marinero, soy capitán, Soy capitán, soy capitán"
ex3_preproc = language_preprocessing(example3, string.(vcat('a':'z', ' ')))
example4 = "We're no strangers to love, you know the rules and so do I. A full commitment's what I'm thinking of, you wouldn't get this from any other guy."
ex4_preproc = language_preprocessing(example4, string.(vcat('a':'z', ' ')))
examples = [ex1_preproc, ex2_preproc, ex3_preproc, ex4_preproc]
test_examples = [text_encoding(ex, alphabet_hv) for ex in examples]

println(predict(test_examples, reference_languages))